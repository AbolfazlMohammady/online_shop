<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فروشگاه زیبایی - محصولات آرایشی و بهداشتی</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        * {
            font-family: 'Inter', 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .theme-bg {
            background: #f1f5f9;
        }
        
        .theme-bg-secondary {
            background: #e2e8f0;
        }
        
        .theme-card {
            background: #f1f5f9;
        }
        
        .theme-text-secondary {
            color: #64748b;
        }
        
        .theme-border {
            border-color: #e2e8f0;
        }
        
        .theme-input {
            background: #f8fafc;
            color: #1f2937;
            border-color: #e2e8f0;
        }
        
        .dark .theme-bg {
            background: #1e293b !important;
        }
        
        .dark .theme-bg-secondary {
            background: #0f172a !important;
        }
        
        .dark .theme-text-secondary {
            color: #94a3b8 !important;
        }
        
        .dark .theme-border {
            border-color: #334155 !important;
        }
        
        .dark .theme-input {
            background: #374151 !important;
            color: white !important;
            border-color: #4b5563 !important;
        }
        
        .dark .theme-card {
            background: #1e293b !important;
            border-color: #334155 !important;
        }
        
        .dark {
            background: radial-gradient(ellipse at center, #1e1b4b 0%, #0f172a 40%, #000000 100%);
            color: white;
            position: relative;
        }
        
        .dark::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse 800px 400px at 50% 20%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse 600px 300px at 80% 60%, rgba(168, 85, 247, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse 400px 200px at 20% 80%, rgba(147, 51, 234, 0.06) 0%, transparent 50%);
            z-index: -2;
            pointer-events: none;
        }
        
        .dark .text-gray-800 {
            color: white !important;
        }
        
        .dark .bg-gray-200 {
            background: #374151 !important;
        }
        
        .dark .hover\:bg-gray-300:hover {
            background: #4b5563 !important;
        }
        
        /* Light mode specific fixes */
        .text-gray-400 {
            color: #6b7280;
        }
        
        .dark .text-gray-400 {
            color: #9ca3af !important;
        }
        
        .text-gray-600 {
            color: #4b5563;
        }
        
        .dark .text-gray-600 {
            color: #d1d5db !important;
        }
        
        .text-gray-700 {
            color: #374151;
        }
        
        .dark .text-gray-700 {
            color: #e5e7eb !important;
        }
        
        .border-gray-700 {
            border-color: #374151;
        }
        
        .dark .border-gray-700 {
            border-color: #6b7280 !important;
        }
        
        .bg-gray-100 {
            background-color: #f3f4f6;
        }
        
        .dark .bg-gray-100 {
            background-color: #374151 !important;
        }
        
        .hover\:bg-gray-100:hover {
            background-color: #f3f4f6;
        }
        
        .dark .hover\:bg-gray-100:hover {
            background-color: #374151 !important;
        }
        
        .bg-gray-200 {
            background-color: #7c6060;
        }
        
        .dark .bg-gray-200 {
            background-color: #45485b !important;
        }
        
        .hover\:bg-gray-200:hover {
            background-color: #d1d5db;
        }
        
        .dark .hover\:bg-gray-200:hover {
            background-color: #6b7280 !important;
        }
        
        .bg-gray-300 {
            background-color: #d1d5db;
        }
        
        .dark .bg-gray-300 {
            background-color: #6b7280 !important;
        }
        
        .hover\:bg-gray-300:hover {
            background-color: #9ca3af;
        }
        
        .dark .hover\:bg-gray-300:hover {
            background-color: #9ca3af !important;
        }
        
        .bg-gray-600 {
            background-color: #4b5563;
        }
        
        .dark .bg-gray-600 {
            background-color: #6b7280 !important;
        }
        
        .hover\:bg-gray-600:hover {
            background-color: #374151;
        }
        
        .dark .hover\:bg-gray-600:hover {
            background-color: #4b5563 !important;
        }
        
        .bg-gray-700 {
            background-color: #374151;
        }
        
        .dark .bg-gray-700 {
            background-color: #4b5563 !important;
        }
        
        .hover\:bg-gray-700:hover {
            background-color: #1f2937;
        }
        
        .dark .hover\:bg-gray-700:hover {
            background-color: #374151 !important;
        }
        
        .bg-gray-800 {
            background-color: #1f2937;
        }
        
        .dark .bg-gray-800 {
            background-color: #374151 !important;
        }
        
        .hover\:bg-gray-800:hover {
            background-color: #111827;
        }
        
        .dark .hover\:bg-gray-800:hover {
            background-color: #1f2937 !important;
        }
        
        .bg-gray-900 {
            background-color: #111827;
        }
        
        .dark .bg-gray-900 {
            background-color: #1f2937 !important;
        }
        
        .hover\:bg-gray-900:hover {
            background-color: #000000;
        }
        
        .dark .hover\:bg-gray-900:hover {
            background-color: #111827 !important;
        }
        
        /* Text color fixes for better contrast */
        .text-gray-500 {
            color: #6b7280;
        }
        
        .dark .text-gray-500 {
            color: #9ca3af !important;
        }
        
        .text-gray-800 {
            color: #1f2937;
        }
        
        .dark .text-gray-800 {
            color: #f9fafb !important;
        }
        
        .text-gray-900 {
            color: #111827;
        }
        
        .dark .text-gray-900 {
            color: #ffffff !important;
        }
        
        /* Button and interactive element fixes */
        .bg-purple-50 {
            background-color: #faf5ff;
        }
        
        .dark .bg-purple-50 {
            background-color: rgba(139, 92, 246, 0.1) !important;
        }
        
        .hover\:bg-purple-50:hover {
            background-color: #f3e8ff;
        }
        
        .dark .hover\:bg-purple-50:hover {
            background-color: rgba(139, 92, 246, 0.2) !important;
        }
        
        .bg-purple-900\/20 {
            background-color: rgba(88, 28, 135, 0.2);
        }
        
        .dark .bg-purple-900\/20 {
            background-color: rgba(139, 92, 246, 0.1) !important;
        }
        
        .hover\:bg-purple-900\/20:hover {
            background-color: rgba(88, 28, 135, 0.3);
        }
        
        .dark .hover\:bg-purple-900\/20:hover {
            background-color: rgba(139, 92, 246, 0.2) !important;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .tab-btn.active {
            border-color: #7c3aed !important;
            color: #7c3aed !important;
        }
        
        .product-tab-btn.active {
            border-color: #7c3aed !important;
            color: #7c3aed !important;
        }
        
        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e2e8f0;
            z-index: 50;
            display: none;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .dark .mobile-nav {
            background: rgba(15, 23, 42, 0.95);
            border-color: #334155;
        }
        
        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .mobile-nav {
                display: block;
            }
            
            .desktop-nav {
                display: none;
            }
            
            body {
                padding-bottom: 80px;
            }
        }
        
        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            color: #6b7280;
            transition: color 0.3s;
        }
        
        .dark .mobile-nav-item {
            color: #94a3b8;
        }
        
        .mobile-nav-item.active {
            color: #7c3aed;
        }
        
        .dark .mobile-nav-item.active {
            color: #a855f7;
        }
        
        /* Text clamp utilities */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Product Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .mobile-nav-item i {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .mobile-nav-item span {
            font-size: 12px;
        }
        
        /* Animated Hearts Background */
        .hearts-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        
        .heart {
            position: absolute;
            transition: opacity 0.3s ease;
            filter: drop-shadow(0 0 15px currentColor) drop-shadow(0 0 30px currentColor);
            animation: heartFloat 6s ease-in-out infinite;
        }
        
        .heart:nth-child(4n+1) {
            color: rgba(236, 72, 153, 0.9); /* Pink */
            animation-delay: 0s;
        }
        
        .heart:nth-child(4n+2) {
            color: rgba(239, 68, 68, 0.9); /* Red */
            animation-delay: 1.5s;
        }
        
        .heart:nth-child(4n+3) {
            color: rgba(147, 51, 234, 0.9); /* Purple */
            animation-delay: 3s;
        }
        
        .heart:nth-child(4n) {
            color: rgba(59, 130, 246, 0.9); /* Blue */
            animation-delay: 4.5s;
        }
        
        .dark .heart {
            display: none;
        }
        
        /* Stars and Moon for dark mode */
        .star {
            position: absolute;
            display: none;
            color: #fbbf24;
            animation: twinkle 3s ease-in-out infinite;
        }
        
        .dark .star {
            display: block;
        }
        
        .moon {
            position: fixed;
            top: 15%;
            right: 8%;
            display: none;
            font-size: 80px;
            color: #fbbf24;
            animation: moonGlow 4s ease-in-out infinite;
            z-index: -1;
            filter: drop-shadow(0 0 30px #fbbf24) drop-shadow(0 0 60px rgba(251, 191, 36, 0.4));
        }
        
        .dark .moon {
            display: block;
        }
        
        /* Lanterns for dark mode */
        .lantern {
            position: absolute;
            display: none;
            animation: rise 15s linear infinite;
            transition: opacity 0.3s ease;
        }
        
        .dark .lantern {
            display: block;
        }
        
        .lantern-body {
            width: 35px;
            height: 50px;
            background: linear-gradient(135deg, #dc2626, #ea580c, #f59e0b);
            border-radius: 12px 12px 6px 6px;
            position: relative;
            box-shadow: 0 0 25px rgba(251, 191, 36, 0.8), inset 0 2px 4px rgba(255, 255, 255, 0.2);
            border: 2px solid #92400e;
        }
        
        .lantern-top {
            width: 40px;
            height: 6px;
            background: linear-gradient(45deg, #451a03, #92400e);
            border-radius: 3px;
            position: absolute;
            top: -8px;
            left: -2.5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .lantern-handle {
            width: 2px;
            height: 15px;
            background: #451a03;
            position: absolute;
            top: -23px;
            left: 16.5px;
            border-radius: 1px;
        }
        
        .lantern-flame {
            width: 8px;
            height: 15px;
            background: radial-gradient(ellipse, #fbbf24 20%, #f59e0b 40%, #dc2626 80%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: absolute;
            top: 12px;
            left: 13.5px;
            animation: flicker 2s ease-in-out infinite alternate;
            filter: blur(0.5px);
        }
        
        .lantern-light {
            position: absolute;
            top: -10px;
            left: -10px;
            width: 55px;
            height: 70px;
            background: radial-gradient(ellipse, rgba(251, 191, 36, 0.4) 0%, rgba(251, 191, 36, 0.2) 40%, transparent 70%);
            border-radius: 50%;
            animation: lightPulse 3s ease-in-out infinite;
        }
        
        @keyframes rise {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        @keyframes flicker {
            0% {
                transform: scale(1) rotate(-1deg);
                opacity: 0.9;
            }
            25% {
                transform: scale(1.05) rotate(1deg);
                opacity: 1;
            }
            50% {
                transform: scale(0.95) rotate(-0.5deg);
                opacity: 0.85;
            }
            75% {
                transform: scale(1.02) rotate(0.8deg);
                opacity: 0.95;
            }
            100% {
                transform: scale(1) rotate(-1deg);
                opacity: 0.9;
            }
        }
        
        @keyframes twinkle {
            0%, 100% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }
        
        @keyframes moonGlow {
            0%, 100% {
                opacity: 0.8;
                text-shadow: 0 0 20px #fbbf24, 0 0 40px #fbbf24;
            }
            50% {
                opacity: 1;
                text-shadow: 0 0 30px #fbbf24, 0 0 60px #fbbf24, 0 0 80px #fbbf24;
            }
        }
        
        @keyframes lightPulse {
            0%, 100% {
                opacity: 0.6;
                transform: scale(1);
            }
            50% {
                opacity: 0.9;
                transform: scale(1.1);
            }
        }
        
        @keyframes shimmer {
            0% {
                transform: translateX(-100%) skewX(-12deg);
            }
            100% {
                transform: translateX(200%) skewX(-12deg);
            }
        }
        
        .animate-shimmer {
            animation: shimmer 3s ease-in-out infinite;
        }
        
        /* Compact Filter Styles */
        .category-pill.active {
            background: linear-gradient(135deg, #8b5cf6, #a855f7) !important;
            color: white !important;
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }
        
        .quick-filter-btn.active {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        @keyframes heartFloat {
            0%, 100% {
                transform: translateY(0px) rotate(0deg) scale(1);
                opacity: 0.8;
            }
            25% {
                transform: translateY(-15px) rotate(2deg) scale(1.1);
                opacity: 1;
            }
            50% {
                transform: translateY(-8px) rotate(-1deg) scale(1.05);
                opacity: 0.9;
            }
            75% {
                transform: translateY(-20px) rotate(1deg) scale(1.15);
                opacity: 1;
            }
        }
        
        .dark .hover\:bg-gray-900:hover {
            background-color: #111827 !important;
        }
        
        /* CSS مخصوص برای عنوان‌ها */
        .product-title {
            color: #000000 !important;
        }
        
        .dark .product-title {
            color: #ffffff !important;
        }
        
        /* یا برای همه متن‌های تیره */
        .text-black {
            color: #000000 !important;
        }
        
        .dark .text-black {
            color: #ffffff !important;
        }
        
        /* CSS مخصوص برای متن‌های خاکستری تیره */
        .text-gray-900 {
            color: #111827 !important;
        }
        
        .dark .text-gray-900 {
            color: #f9fafb !important;
        }
        
        /* CSS مخصوص برای پس‌زمینه سفید */
        .bg-white {
            background-color: #ffffff !important;
        }
        
        .dark .bg-white {
            background-color: #1f2937 !important;
        }
        
        /* CSS مخصوص برای بوردر خاکستری روشن */
        .border-gray-200 {
            border-color: #e5e7eb !important;
        }
        
        .dark .border-gray-200 {
            border-color: #374151 !important;
        }
        
        /* CSS مخصوص برای بوردر خاکستری تیره */
        .border-gray-700 {
            border-color: #374151 !important;
        }
        
        .dark .border-gray-700 {
            border-color: #374151 !important;
        }
        
        .tab-content {
            display: none;
        }
    </style>
</head>
<body class="theme-bg-secondary">
    <!-- Animated Hearts Background -->
    <div class="hearts-background" id="hearts-bg"></div>
    
    <!-- Moon for dark mode -->
    <div class="moon">🌙</div>
    
    <!-- Header -->
    <header class="theme-bg shadow-xl sticky top-0 z-40 backdrop-blur-md bg-white/95 dark:bg-gray-900/95">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between py-3">
                <!-- Logo -->
                <div class="flex items-center gap-4">
                    <div class="w-10 h-10 bg-gradient-to-br from-purple-600 via-pink-600 to-purple-800 rounded-xl flex items-center justify-center shadow-lg transform hover:scale-105 transition-transform">
                        <i class="fas fa-gem text-white text-sm"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">زیبایی شاپ</h1>
                        <p class="text-xs theme-text-secondary font-medium">فروشگاه آرایشی و بهداشتی</p>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="desktop-nav hidden lg:flex items-center gap-2">
                    <a href="#home" onclick="showPage('home'); setActiveNavLink(this); return false;" class="nav-link px-4 py-2 rounded-lg font-semibold hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:text-purple-600 transition-all duration-300 relative group text-gray-700 dark:text-gray-300 bg-purple-50 dark:bg-purple-900/20" data-page="home">
                        <i class="fas fa-home ml-2 text-gray-700 dark:text-gray-300"></i>
                        خانه
                        <span class="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-full h-0.5 bg-purple-600 transition-all duration-300"></span>
                    </a>
                    
                    <a href="#products" onclick="showPage('products'); setActiveNavLink(this); return false;" class="nav-link px-4 py-2 rounded-lg font-semibold hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:text-purple-600 transition-all duration-300 relative group text-gray-700 dark:text-gray-300" data-page="products">
                        <i class="fas fa-shopping-bag ml-2 text-gray-700 dark:text-gray-300"></i>
                        محصولات
                        <span class="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0 h-0.5 bg-purple-600 group-hover:w-full transition-all duration-300"></span>
                    </a>
                    
                    <a href="#blog" onclick="showPage('blog'); setActiveNavLink(this); return false;" class="nav-link px-4 py-2 rounded-lg font-semibold hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:text-purple-600 transition-all duration-300 relative group text-gray-700 dark:text-gray-300" data-page="blog">
                        <i class="fas fa-newspaper ml-2 text-gray-700 dark:text-gray-300"></i>
                        وبلاگ
                        <span class="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0 h-0.5 bg-purple-600 group-hover:w-full transition-all duration-300"></span>
                    </a>
                    <a href="#contact" onclick="showPage('contact'); setActiveNavLink(this); return false;" class="nav-link px-4 py-2 rounded-lg font-semibold hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:text-purple-600 transition-all duration-300 relative group text-gray-700 dark:text-gray-300" data-page="contact">
                        <i class="fas fa-phone ml-2 text-gray-700 dark:text-gray-300"></i>
                        تماس با ما
                        <span class="absolute bottom-0 left-1/2 transform -translate-x-1/2 w-0 h-0.5 bg-purple-600 group-hover:w-full transition-all duration-300"></span>
                    </a>
                </nav>

                <!-- Actions -->
                <div class="flex items-center gap-3">
                    <button onclick="toggleTheme()" class="p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 transform hover:scale-105">
                        <i id="theme-icon" class="fas fa-moon text-lg text-gray-800 dark:text-gray-200"></i>
                    </button>
                    <button onclick="showPage('cart')" class="p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 relative transform hover:scale-105">
                        <i class="fas fa-shopping-cart text-lg text-gray-800 dark:text-gray-200"></i>
                        <span id="cart-count" class="absolute -top-1 -right-1 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold shadow-lg animate-pulse">3</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation -->
    <div class="mobile-nav">
        <div class="flex justify-around">
            <button onclick="showPage('home')" class="mobile-nav-item active" data-page="home">
                <i class="fas fa-home"></i>
                <span>خانه</span>
            </button>
            <button onclick="showPage('products')" class="mobile-nav-item" data-page="products">
                <i class="fas fa-shopping-bag"></i>
                <span>محصولات</span>
            </button>
            <button onclick="showPage('blog')" class="mobile-nav-item" data-page="blog">
                <i class="fas fa-newspaper"></i>
                <span>وبلاگ</span>
            </button>
            <button onclick="showPage('cart')" class="mobile-nav-item" data-page="cart">
                <i class="fas fa-shopping-cart"></i>
                <span>سبد خرید</span>
            </button>
            <button onclick="showPage('contact')" class="mobile-nav-item" data-page="contact">
                <i class="fas fa-phone"></i>
                <span>تماس</span>
            </button>
        </div>
    </div>

    <!-- Product Modal -->
    <div id="product-modal" class="modal" onclick="closeProductModal()">
        <div class="modal-content theme-card rounded-2xl shadow-2xl m-4 w-full max-w-4xl" onclick="event.stopPropagation()">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">جزئیات</h2>
                    <button onclick="closeProductModal()" class="w-10 h-10 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-full flex items-center justify-center transition-colors">
                        <i class="fas fa-times text-gray-700 dark:text-gray-300"></i>
                    </button>
                </div>
                <div id="modal-product-content">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </div>
    </div>
 
    {% block contact %}
    {% endblock %}
 
 
 
 <!-- Footer -->
 <footer class="theme-bg border-t theme-border py-8">
    <div class="container mx-auto px-4">
        <div class="grid md:grid-cols-3 gap-6">
            <!-- Brand Section -->
            <div>
                <div class="flex items-center gap-3 mb-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-purple-600 to-pink-600 rounded-xl flex items-center justify-center">
                        <i class="fas fa-gem text-white text-sm"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white">زیبایی شاپ</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-xs">فروشگاه آرایشی و بهداشتی</p>
                    </div>
                </div>
                <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm leading-relaxed">فروشگاه آنلاین محصولات آرایشی و بهداشتی با بهترین کیفیت و قیمت.</p>
                
                <!-- Social Media -->
                <div class="flex gap-2">
                    <a href="#" class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white hover:bg-blue-700 transition-colors">
                        <i class="fab fa-telegram text-sm"></i>
                    </a>
                    <a href="#" class="w-8 h-8 bg-pink-600 rounded-lg flex items-center justify-center text-white hover:bg-pink-700 transition-colors">
                        <i class="fab fa-instagram text-sm"></i>
                    </a>
                    <a href="#" class="w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center text-white hover:bg-green-700 transition-colors">
                        <i class="fab fa-whatsapp text-sm"></i>
                    </a>
                </div>
            </div>
            
            <!-- Quick Links -->
            <div>
                <h4 class="text-base font-bold mb-3 text-gray-900 dark:text-white">لینک‌های مفید</h4>
                <ul class="space-y-1 text-sm">
                    <li><a href="#" onclick="showPage('home')" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">صفحه اصلی</a></li>
                    <li><a href="#" onclick="showPage('products')" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">محصولات</a></li>
                    <li><a href="#" onclick="showPage('blog')" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">وبلاگ</a></li>
                    <li><a href="#" onclick="showPage('contact')" class="text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors">تماس با ما</a></li>
                </ul>
            </div>
            
            <!-- Contact Info -->
            <div>
                <h4 class="text-base font-bold mb-3 text-gray-900 dark:text-white">تماس با ما</h4>
                <ul class="space-y-2 text-sm">
                    <li class="flex items-center gap-2">
                        <i class="fas fa-phone text-purple-600 dark:text-purple-400"></i>
                        <span class="text-gray-600 dark:text-gray-400">۰۲۱-۱۲۳۴۵۶۷۸</span>
                    </li>
                    <li class="flex items-center gap-2">
                        <i class="fas fa-envelope text-purple-600 dark:text-purple-400"></i>
                        <span class="text-gray-600 dark:text-gray-400">info@beautyshop.com</span>
                    </li>
                    <li class="flex items-center gap-2">
                        <i class="fas fa-map-marker-alt text-purple-600 dark:text-purple-400"></i>
                        <span class="text-gray-600 dark:text-gray-400">تهران، خیابان ولیعصر</span>
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- Bottom Section -->
        <div class="border-t border-gray-300 dark:border-gray-700 mt-6 pt-4 text-center">
            <p class="text-gray-600 dark:text-gray-400 text-xs">&copy; ۱۴۰۲ زیبایی شاپ. تمامی حقوق محفوظ است.</p>
        </div>
    </div>
</footer>

<script>
    // Sample blog data
    const blogs = [
        {
            id: 1,
            title: 'مراقبت از پوست در زمستان',
            excerpt: 'نکات مهم برای حفظ سلامت پوست در فصل سرد',
            date: '۱۵ آذر ۱۴۰۲',
            image: 'fas fa-leaf',
            color: 'from-green-200 to-blue-200',
            iconColor: 'text-green-600',
            content: `
                <h2 class="text-3xl font-bold mb-6">مراقبت از پوست در زمستان</h2>
                <div class="flex items-center gap-4 mb-8 text-sm theme-text-secondary">
                    <span><i class="fas fa-calendar ml-1"></i>۱۵ آذر ۱۴۰۲</span>
                    <span><i class="fas fa-user ml-1"></i>تیم زیبایی شاپ</span>
                    <span><i class="fas fa-clock ml-1"></i>۵ دقیقه مطالعه</span>
                </div>
                
                <div class="prose prose-lg max-w-none">
                    <p class="text-lg leading-relaxed mb-6">
                        فصل زمستان با خشکی هوا و سرمای شدید، چالش‌های خاصی برای پوست ایجاد می‌کند. در این مقاله به بررسی راه‌های مراقبت از پوست در این فصل می‌پردازیم.
                    </p>
                    
                    <h3 class="text-2xl font-bold mb-4 text-purple-600">چرا پوست در زمستان خشک می‌شود؟</h3>
                    <p class="mb-6">
                        هوای سرد زمستان رطوبت کمتری دارد و این باعث می‌شود پوست رطوبت طبیعی خود را از دست بدهد. همچنین استفاده از بخاری و سیستم‌های گرمایشی نیز خشکی پوست را تشدید می‌کند.
                    </p>
                    
                    <h3 class="text-2xl font-bold mb-4 text-purple-600">نکات مهم مراقبت از پوست</h3>
                    <ul class="list-disc list-inside mb-6 space-y-2">
                        <li>استفاده از کرم مرطوب کننده قوی‌تر</li>
                        <li>کاهش دفعات شستشوی صورت</li>
                        <li>استفاده از آب ولرم به جای آب داغ</li>
                        <li>نوشیدن آب کافی در طول روز</li>
                        <li>استفاده از دستگاه بخور در خانه</li>
                    </ul>
                    
                    <h3 class="text-2xl font-bold mb-4 text-purple-600">محصولات پیشنهادی</h3>
                    <p class="mb-6">
                        برای مراقبت بهتر از پوست در زمستان، استفاده از کرم‌های مرطوب کننده حاوی سرامید و هیالورونیک اسید توصیه می‌شود. همچنین سرم‌های مغذی می‌توانند کمک شایانی به سلامت پوست کنند.
                    </p>
                </div>
            `
        },
        {
            id: 2,
            title: 'آرایش طبیعی روزانه',
            excerpt: 'راهنمای کامل آرایش ساده و زیبا',
            date: '۱۲ آذر ۱۴۰۲',
            image: 'fas fa-palette',
            color: 'from-pink-200 to-purple-200',
            iconColor: 'text-pink-600',
            content: `
                <h2 class="text-3xl font-bold mb-6">آرایش طبیعی روزانه</h2>
                <div class="flex items-center gap-4 mb-8 text-sm theme-text-secondary">
                    <span><i class="fas fa-calendar ml-1"></i>۱۲ آذر ۱۴۰۲</span>
                    <span><i class="fas fa-user ml-1"></i>تیم زیبایی شاپ</span>
                    <span><i class="fas fa-clock ml-1"></i>۷ دقیقه مطالعه</span>
                </div>
                
                <div class="prose prose-lg max-w-none">
                    <p class="text-lg leading-relaxed mb-6">
                        آرایش طبیعی روزانه راهی عالی برای داشتن ظاهری تازه و جذاب بدون اغراق است. در این راهنما، مراحل آرایش ساده و سریع را یاد خواهید گرفت.
                    </p>
                    
                    <h3 class="text-2xl font-bold mb-4 text-purple-600">مرحله اول: آماده‌سازی پوست</h3>
                    <p class="mb-6">
                        قبل از شروع آرایش، پوست را با یک پاک‌کننده ملایم تمیز کنید و سپس کرم مرطوب کننده و کرم ضد آفتاب استفاده کنید.
                    </p>
                    
                    <h3 class="text-2xl font-bold mb-4 text-purple-600">مرحله دوم: پایه آرایش</h3>
                    <ul class="list-disc list-inside mb-6 space-y-2">
                        <li>استفاده از پرایمر برای ماندگاری بیشتر</li>
                        <li>اعمال کانسیلر روی لکه‌ها و تیرگی‌ها</li>
                        <li>استفاده از کرم پودر یا BB کرم</li>
                        <li>تثبیت با پودر شفاف</li>
                    </ul>
                    
                    <h3 class="text-2xl font-bold mb-4 text-purple-600">مرحله سوم: آرایش چشم و لب</h3>
                    <p class="mb-6">
                        برای آرایش طبیعی، از سایه‌های ملایم و نزدیک به رنگ پوست استفاده کنید. مژه‌ها را با ریمل مشکی یا قهوه‌ای رنگ کنید و برای لب‌ها از رژلب طبیعی یا گلاس استفاده کنید.
                    </p>
                </div>
            `
        },
        {
            id: 3,
            title: 'مراقبت از مو',
            excerpt: 'بهترین روش‌های نگهداری از موهای سالم',
            date: '۱۰ آذر ۱۴۰۲',
            image: 'fas fa-cut',
            color: 'from-amber-200 to-orange-200',
            iconColor: 'text-amber-600',
            content: `
                <h2 class="text-3xl font-bold mb-6">مراقبت از مو</h2>
                <div class="flex items-center gap-4 mb-8 text-sm theme-text-secondary">
                    <span><i class="fas fa-calendar ml-1"></i>۱۰ آذر ۱۴۰۲</span>
                    <span><i class="fas fa-user ml-1"></i>تیم زیبایی شاپ</span>
                    <span><i class="fas fa-clock ml-1"></i>۶ دقیقه مطالعه</span>
                </div>
                
                <div class="prose prose-lg max-w-none">
                    <p class="text-lg leading-relaxed mb-6">
                        داشتن موهای سالم و زیبا نیازمند مراقبت‌های منظم و استفاده از محصولات مناسب است. در این مقاله با روش‌های مراقبت از مو آشنا می‌شوید.
                    </p>
                    
                    <h3 class="text-2xl font-bold mb-4 text-purple-600">شستشوی صحیح مو</h3>
                    <p class="mb-6">
                        شستشوی مو باید بر اساس نوع مو انجام شود. موهای چرب نیاز به شستشوی بیشتری دارند در حالی که موهای خشک کمتر باید شسته شوند.
                    </p>
                    
                    <h3 class="text-2xl font-bold mb-4 text-purple-600">نکات مهم مراقبت</h3>
                    <ul class="list-disc list-inside mb-6 space-y-2">
                        <li>استفاده از شامپو مناسب نوع مو</li>
                        <li>اعمال نرم‌کننده فقط روی انتهای مو</li>
                        <li>اجتناب از آب بیش از حد داغ</li>
                        <li>استفاده از ماسک مو هفته‌ای یک بار</li>
                        <li>محافظت از مو در برابر حرارت</li>
                    </ul>
                    
                    <h3 class="text-2xl font-bold mb-4 text-purple-600">تغذیه مناسب برای مو</h3>
                    <p class="mb-6">
                        تغذیه مناسب نقش مهمی در سلامت مو دارد. مصرف پروتئین، ویتامین‌های B و C، آهن و روی برای رشد مو ضروری است.
                    </p>
                </div>
            `
        }
    ];

    // Sample products data
    const products = [
        {
            id: 1,
            name: 'رژ لب مات قرمز',
            category: 'رژ لب',
            price: 125000,
            rating: 4.8,
            image: 'fas fa-lipstick',
            color: 'from-red-200 to-pink-200',
            iconColor: 'text-red-600',
            tags: ['bestseller', 'discount'],
            detailImages: [
                { color: 'from-red-300 to-pink-300', icon: 'fas fa-lipstick', iconColor: 'text-red-700' },
                { color: 'from-red-100 to-pink-100', icon: 'fas fa-lipstick', iconColor: 'text-red-500' },
                { color: 'from-red-400 to-pink-400', icon: 'fas fa-lipstick', iconColor: 'text-red-800' }
            ]
        },
        {
            id: 2,
            name: 'کرم مرطوب کننده',
            category: 'کرم',
            price: 85000,
            rating: 4.6,
            image: 'fas fa-tint',
            color: 'from-blue-200 to-cyan-200',
            iconColor: 'text-blue-600',
            tags: ['new'],
            detailImages: [
                { color: 'from-blue-300 to-cyan-300', icon: 'fas fa-tint', iconColor: 'text-blue-700' },
                { color: 'from-blue-100 to-cyan-100', icon: 'fas fa-tint', iconColor: 'text-blue-500' },
                { color: 'from-blue-400 to-cyan-400', icon: 'fas fa-tint', iconColor: 'text-blue-800' }
            ]
        },
        {
            id: 3,
            name: 'عطر زنانه گل یاس',
            category: 'عطر',
            price: 250000,
            rating: 4.9,
            image: 'fas fa-spray-can',
            color: 'from-purple-200 to-indigo-200',
            iconColor: 'text-purple-600',
            tags: ['luxury', 'bestseller'],
            detailImages: [
                { color: 'from-purple-300 to-indigo-300', icon: 'fas fa-spray-can', iconColor: 'text-purple-700' },
                { color: 'from-purple-100 to-indigo-100', icon: 'fas fa-spray-can', iconColor: 'text-purple-500' },
                { color: 'from-purple-400 to-indigo-400', icon: 'fas fa-spray-can', iconColor: 'text-purple-800' }
            ]
        },
        {
            id: 4,
            name: 'گیره مو طلایی',
            category: 'گیره مو',
            price: 35000,
            rating: 4.3,
            image: 'fas fa-cut',
            color: 'from-yellow-200 to-orange-200',
            iconColor: 'text-yellow-600',
            tags: ['discount'],
            detailImages: [
                { color: 'from-yellow-300 to-orange-300', icon: 'fas fa-cut', iconColor: 'text-yellow-700' },
                { color: 'from-yellow-100 to-orange-100', icon: 'fas fa-cut', iconColor: 'text-yellow-500' },
                { color: 'from-yellow-400 to-orange-400', icon: 'fas fa-cut', iconColor: 'text-yellow-800' }
            ]
        },
        {
            id: 5,
            name: 'رژ لب صورتی',
            category: 'رژ لب',
            price: 110000,
            rating: 4.7,
            image: 'fas fa-lipstick',
            color: 'from-pink-200 to-rose-200',
            iconColor: 'text-pink-600',
            tags: ['bestseller'],
            detailImages: [
                { color: 'from-pink-300 to-rose-300', icon: 'fas fa-lipstick', iconColor: 'text-pink-700' },
                { color: 'from-pink-100 to-rose-100', icon: 'fas fa-lipstick', iconColor: 'text-pink-500' },
                { color: 'from-pink-400 to-rose-400', icon: 'fas fa-lipstick', iconColor: 'text-pink-800' }
            ]
        },
        {
            id: 6,
            name: 'کرم ضد آفتاب',
            category: 'کرم',
            price: 95000,
            rating: 4.5,
            image: 'fas fa-sun',
            color: 'from-orange-200 to-yellow-200',
            iconColor: 'text-orange-600',
            tags: ['new', 'discount'],
            detailImages: [
                { color: 'from-orange-300 to-yellow-300', icon: 'fas fa-sun', iconColor: 'text-orange-700' },
                { color: 'from-orange-100 to-yellow-100', icon: 'fas fa-sun', iconColor: 'text-orange-500' },
                { color: 'from-orange-400 to-yellow-400', icon: 'fas fa-sun', iconColor: 'text-orange-800' }
            ]
        },
        {
            id: 7,
            name: 'سرم ویتامین C',
            category: 'سرم',
            price: 180000,
            rating: 4.9,
            image: 'fas fa-leaf',
            color: 'from-green-200 to-emerald-200',
            iconColor: 'text-green-600',
            tags: ['luxury', 'new'],
            detailImages: [
                { color: 'from-green-300 to-emerald-300', icon: 'fas fa-leaf', iconColor: 'text-green-700' },
                { color: 'from-green-100 to-emerald-100', icon: 'fas fa-leaf', iconColor: 'text-green-500' },
                { color: 'from-green-400 to-emerald-400', icon: 'fas fa-leaf', iconColor: 'text-green-800' }
            ]
        },
        {
            id: 8,
            name: 'عطر لوکس زنانه',
            category: 'عطر',
            price: 320000,
            rating: 4.8,
            image: 'fas fa-gem',
            color: 'from-indigo-200 to-purple-200',
            iconColor: 'text-indigo-600',
            tags: ['luxury'],
            detailImages: [
                { color: 'from-indigo-300 to-purple-300', icon: 'fas fa-gem', iconColor: 'text-indigo-700' },
                { color: 'from-indigo-100 to-purple-100', icon: 'fas fa-gem', iconColor: 'text-indigo-500' },
                { color: 'from-indigo-400 to-purple-400', icon: 'fas fa-gem', iconColor: 'text-indigo-800' }
            ]
        }
    ];

    let filteredProducts = [...products];
    let currentView = 'grid';
    let activeFilters = {
        search: '',
        category: '',
        sort: 'default',
        minPrice: null,
        maxPrice: null,
        quickFilter: null
    };

    let cart = [
        { id: 1, name: 'رژ لب مات قرمز', price: 125000, quantity: 2, image: 'fas fa-lipstick', color: 'from-red-200 to-pink-200', iconColor: 'text-red-600' },
        { id: 2, name: 'کرم مرطوب کننده', price: 85000, quantity: 1, image: 'fas fa-tint', color: 'from-blue-200 to-cyan-200', iconColor: 'text-blue-600' }
    ];

    // Countdown Timer Function - تایمر شمارش معکوس
    function startCountdown() {
        const countdownDate = new Date().getTime() + (24 * 60 * 60 * 1000);
        
        const timer = setInterval(function() {
            const now = new Date().getTime();
            const distance = countdownDate - now;
            
            if (distance < 0) {
                clearInterval(timer);
                const timerElement = document.getElementById('countdown-timer-hero');
                if (timerElement) {
                    timerElement.innerHTML = '<span class="text-yellow-300">⏰ تخفیف به پایان رسید!</span>';
                }
                return;
            }
            
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            
            const hoursEl = document.getElementById('hours-hero');
            const minutesEl = document.getElementById('minutes-hero');
            const secondsEl = document.getElementById('seconds-hero');
            
            if (hoursEl) hoursEl.textContent = hours.toString().padStart(2, '0');
            if (minutesEl) minutesEl.textContent = minutes.toString().padStart(2, '0');
            if (secondsEl) secondsEl.textContent = seconds.toString().padStart(2, '0');
        }, 1000);
    }

    // Page Navigation
    function showPage(pageId) {
        // Hide all pages
        document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
        });
        
        // Show selected page
        document.getElementById(pageId).classList.add('active');
        
        // Update desktop navigation
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('text-purple-600', 'bg-purple-50', 'dark:bg-purple-900/20');
            const underline = link.querySelector('span');
            if (underline) {
                underline.classList.remove('w-full');
                underline.classList.add('w-0');
            }
            if (link.dataset.page === pageId) {
                link.classList.add('text-purple-600', 'bg-purple-50', 'dark:bg-purple-900/20');
                if (underline) {
                    underline.classList.remove('w-0');
                    underline.classList.add('w-full');
                }
            }
        });
        
        // Update mobile navigation
        updateMobileNav(pageId);
        
        // Update URL hash
        window.location.hash = pageId;
        
        // Scroll to top
        window.scrollTo(0, 0);
    }

    // Set active navigation link
    function setActiveNavLink(clickedLink) {
        // Remove active state from all nav links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('text-purple-600', 'bg-purple-50', 'dark:bg-purple-900/20');
            const underline = link.querySelector('span');
            if (underline) {
                underline.classList.remove('w-full');
                underline.classList.add('w-0');
            }
        });
        
        // Add active state to clicked link
        clickedLink.classList.add('text-purple-600', 'bg-purple-50', 'dark:bg-purple-900/20');
        const underline = clickedLink.querySelector('span');
        if (underline) {
            underline.classList.remove('w-0');
            underline.classList.add('w-full');
        }
    }

    // Filter by category
    function filterByCategory(category) {
        // Map category names to product categories
        const categoryMap = {
            'آرایش صورت': ['رژ لب'],
            'مراقبت پوست': ['کرم'],
            'مراقبت مو': ['مراقبت مو'],
            'عطر': ['عطر'],
            'گیره مو': ['گیره مو']
        };
        
        const targetCategories = categoryMap[category] || [category];
        
        // Filter and render products
        const filteredProducts = products.filter(product => 
            targetCategories.includes(product.category)
        );
        
        renderProducts(filteredProducts);
        
        // Set active nav link for products page
        const productsLink = document.querySelector('[data-page="products"]');
        if (productsLink) {
            setActiveNavLink(productsLink);
        }
    }

    // Mobile Navigation
    function updateMobileNav(activePageId) {
        document.querySelectorAll('.mobile-nav-item').forEach(item => {
            item.classList.remove('active');
            if (item.dataset.page === activePageId) {
                item.classList.add('active');
            }
        });
    }

    // Theme Toggle
    function toggleTheme() {
        const body = document.body;
        const icon = document.getElementById('theme-icon');
        
        body.classList.toggle('dark');
        
        if (body.classList.contains('dark')) {
            icon.className = 'fas fa-sun text-lg';
            localStorage.setItem('theme', 'dark');
        } else {
            icon.className = 'fas fa-moon text-lg';
            localStorage.setItem('theme', 'light');
        }
    }

    let previousPage = 'home';

    // Product Detail Functions
    function showProductDetail(productId) {
        const product = products.find(p => p.id === productId);
        if (!product) return;
        
        previousPage = getCurrentPage();
        
        const detailContent = document.getElementById('product-detail-content');
        detailContent.innerHTML = `
            <!-- Product Image -->
            <div class="space-y-6">
                <div class="aspect-square bg-gradient-to-br ${product.color} rounded-2xl flex items-center justify-center shadow-lg">
                    <i class="${product.image} text-8xl ${product.iconColor}"></i>
                </div>
                
                <!-- Product Gallery Thumbnails -->
                <div class="flex gap-3">
                    <div class="w-20 h-20 bg-gradient-to-br ${product.color} rounded-xl flex items-center justify-center border-2 border-purple-500 cursor-pointer">
                        <i class="${product.image} text-2xl ${product.iconColor}"></i>
                    </div>
                    <div class="w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-xl flex items-center justify-center cursor-pointer opacity-60 hover:opacity-100 transition-opacity">
                        <i class="${product.image} text-2xl text-gray-500"></i>
                    </div>
                    <div class="w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-xl flex items-center justify-center cursor-pointer opacity-60 hover:opacity-100 transition-opacity">
                        <i class="${product.image} text-2xl text-gray-500"></i>
                    </div>
                </div>
            </div>
            
            <!-- Product Info -->
            <div class="space-y-8">
                <div>
                    <h1 class="text-4xl font-bold mb-4 text-gray-900 dark:text-white">${product.name}</h1>
                    <p class="text-lg text-gray-900 dark:text-gray-400 mb-6">دسته‌بندی: ${product.category}</p>
                    
                    <!-- Rating -->
                    <div class="flex items-center gap-4 mb-6">
                        <div class="flex text-yellow-400 text-lg">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <span class="text-lg font-semibold text-gray-900 dark:text-white">${product.rating}</span>
                        <span class="text-gray-900 dark:text-gray-400">(۱۲۳ نظر)</span>
                    </div>
                    
                    <!-- Price -->
                    <div class="flex items-center gap-4 mb-8">
                        <span class="text-3xl font-bold text-purple-600">${product.price.toLocaleString()} تومان</span>
                        <span class="text-lg text-gray-900 dark:text-gray-400 line-through">${(product.price * 1.2).toLocaleString()} تومان</span>
                        <span class="bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 px-3 py-1 rounded-lg text-sm font-bold">۲۰٪ تخفیف</span>
                    </div>
                </div>
                
                <!-- Product Options -->
                <div class="space-y-6">
                    <div>
                        <h3 class="text-lg font-bold mb-3 text-gray-900 dark:text-white">رنگ:</h3>
                        <div class="flex gap-3">
                            <button class="w-12 h-12 bg-red-500 rounded-full border-2 border-purple-500 shadow-lg"></button>
                            <button class="w-12 h-12 bg-pink-500 rounded-full border-2 border-transparent hover:border-purple-500 shadow-lg transition-colors"></button>
                            <button class="w-12 h-12 bg-purple-500 rounded-full border-2 border-transparent hover:border-purple-500 shadow-lg transition-colors"></button>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-bold mb-3 text-gray-900 dark:text-white">تعداد:</h3>
                        <div class="flex items-center gap-4">
                            <button class="w-12 h-12 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 rounded-xl flex items-center justify-center font-bold text-lg transition-colors text-gray-900 dark:text-gray-300">-</button>
                            <span class="text-xl font-bold w-12 text-center text-gray-900 dark:text-white">1</span>
                            <button class="w-12 h-12 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 rounded-xl flex items-center justify-center font-bold text-lg transition-colors text-gray-900 dark:text-gray-300">+</button>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="space-y-4">
                    <button onclick="addToCart(${product.id})" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-4 rounded-xl font-bold text-lg transition-colors flex items-center justify-center gap-3">
                        <i class="fas fa-cart-plus"></i>
                        افزودن به سبد خرید
                    </button>
                    <button class="w-full bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 py-4 rounded-xl font-bold text-lg transition-colors flex items-center justify-center gap-3 text-gray-900 dark:text-gray-300">
                        <i class="fas fa-heart"></i>
                        افزودن به علاقه‌مندی‌ها
                    </button>
                </div>
                
                <!-- Product Description -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-700">
                    <h3 class="text-xl font-bold mb-4 text-gray-900 dark:text-white">توضیحات محصول</h3>
                    <p class="leading-relaxed text-gray-900 dark:text-gray-300 mb-6">
                        این محصول با کیفیت بالا و مواد اولیه درجه یک تولید شده است. مناسب برای استفاده روزانه و دارای ماندگاری بالا می‌باشد. 
                        تمامی محصولات ما دارای مجوزهای لازم و تست شده توسط متخصصان هستند.
                    </p>
                    
                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-check-circle text-green-500"></i>
                            <span class="text-gray-900 dark:text-white font-medium">کیفیت تضمینی</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-check-circle text-green-500"></i>
                            <span class="text-gray-900 dark:text-white font-medium">ارسال سریع</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-check-circle text-green-500"></i>
                            <span class="text-gray-900 dark:text-white font-medium">ضمانت بازگشت</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <i class="fas fa-check-circle text-green-500"></i>
                            <span class="text-gray-900 dark:text-white font-medium">پشتیبانی ۲۴/۷</span>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        showPage('product-detail');
    }

    // Blog Detail Functions
    function showBlogDetail(blogId) {
        const blog = blogs.find(b => b.id === blogId);
        if (!blog) return;
        
        previousPage = getCurrentPage();
        
        const detailContent = document.getElementById('blog-detail-content');
        detailContent.innerHTML = `
            <article class="theme-bg rounded-2xl shadow-lg overflow-hidden">
                <!-- Blog Header -->
                <div class="h-64 bg-gradient-to-br ${blog.color} flex items-center justify-center">
                    <i class="${blog.image} text-6xl ${blog.iconColor}"></i>
                </div>
                
                <!-- Blog Content -->
                <div class="p-8">
                    ${blog.content}
                    
                    <!-- Share Buttons -->
                    <div class="mt-12 pt-8 border-t theme-border">
                        <h4 class="text-lg font-bold mb-4">اشتراک‌گذاری:</h4>
                        <div class="flex gap-3">
                            <button class="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fab fa-telegram"></i>
                                تلگرام
                            </button>
                            <button class="flex items-center gap-2 bg-pink-600 hover:bg-pink-700 text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fab fa-instagram"></i>
                                اینستاگرام
                            </button>
                            <button class="flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fab fa-whatsapp"></i>
                                واتساپ
                            </button>
                        </div>
                    </div>
                    
                    <!-- Related Posts -->
                    <div class="mt-12 pt-8 border-t theme-border">
                        <h4 class="text-lg font-bold mb-6">مطالب مرتبط:</h4>
                        <div class="grid md:grid-cols-2 gap-6">
                            ${blogs.filter(b => b.id !== blogId).slice(0, 2).map(relatedBlog => `
                                <div onclick="showBlogDetail(${relatedBlog.id})" class="flex gap-4 p-4 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors">
                                    <div class="w-16 h-16 bg-gradient-to-br ${relatedBlog.color} rounded-xl flex items-center justify-center flex-shrink-0">
                                        <i class="${relatedBlog.image} text-xl ${relatedBlog.iconColor}"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-bold mb-1">${relatedBlog.title}</h5>
                                        <p class="text-sm theme-text-secondary">${relatedBlog.date}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            </article>
        `;
        
        showPage('blog-detail');
    }

    // Helper Functions
    function getCurrentPage() {
        const activePage = document.querySelector('.page.active');
        return activePage ? activePage.id : 'home';
    }

    function goBack() {
        showPage(previousPage);
    }

    // Render Blog Posts
    function renderBlogs() {
        const blogGrid = document.getElementById('blog-grid');
        if (!blogGrid) return;
        
        blogGrid.innerHTML = blogs.map(blog => `
            <article onclick="openBlogModal(${blog.id})" class="theme-card rounded-xl shadow-lg overflow-hidden card-hover cursor-pointer">
                <div class="h-24 sm:h-32 bg-gradient-to-br ${blog.color} flex items-center justify-center">
                    <i class="${blog.image} text-lg sm:text-2xl ${blog.iconColor}"></i>
                </div>
                <div class="p-2 sm:p-4">
                    <h3 class="text-xs sm:text-base font-bold mb-1 sm:mb-2 line-clamp-2">${blog.title}</h3>
                    <p class="theme-text-secondary text-xs mb-2 sm:mb-3 line-clamp-3">${blog.excerpt}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-xs theme-text-secondary">${blog.date}</span>
                        <button class="text-purple-600 hover:text-purple-700 font-semibold text-xs">ادامه مطلب</button>
                    </div>
                </div>
            </article>
        `).join('');
    }

    // Products Functions
    function renderProducts(productsToRender = products) {
        const grid = document.getElementById('products-grid');
        if (!grid) return;
        
        grid.innerHTML = '';
        
        if (currentView === 'list') {
            grid.className = 'space-y-4';
            productsToRender.forEach(product => {
                const productCard = `
                    <div class="theme-card rounded-2xl shadow-lg overflow-hidden card-hover cursor-pointer flex" onclick="openProductModal(${product.id})">
                        <div class="w-32 h-32 bg-gradient-to-br ${product.color} flex items-center justify-center flex-shrink-0">
                            <i class="${product.image} text-3xl ${product.iconColor}"></i>
                        </div>
                        <div class="p-6 flex-1 flex items-center justify-between">
                            <div>
                                <h3 class="text-lg font-bold mb-2">${product.name}</h3>
                                <p class="theme-text-secondary text-sm mb-3">${product.category}</p>
                                <div class="flex items-center">
                                    <div class="flex text-yellow-400">
                                        <i class="fas fa-star text-sm"></i>
                                        <i class="fas fa-star text-sm"></i>
                                        <i class="fas fa-star text-sm"></i>
                                        <i class="fas fa-star text-sm"></i>
                                        <i class="fas fa-star text-sm"></i>
                                    </div>
                                    <span class="mr-2 text-sm theme-text-secondary">(${toPersianNumber(product.rating)})</span>
                                </div>
                            </div>
                            <div class="text-left">
                                <span class="text-xl font-bold text-purple-600 block mb-4">${toPersianNumber(product.price.toLocaleString())} تومان</span>
                                <button onclick="event.stopPropagation(); addToCart(${product.id})" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors">
                                    <i class="fas fa-cart-plus ml-2"></i>
                                    افزودن
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                grid.innerHTML += productCard;
            });
        } else {
            grid.className = 'grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4';
            productsToRender.forEach(product => {
                const productCard = `
                    <div class="theme-card rounded-xl shadow-lg overflow-hidden card-hover cursor-pointer" onclick="openProductModal(${product.id})">
                        <div class="h-24 sm:h-32 bg-gradient-to-br ${product.color} flex items-center justify-center">
                            <i class="${product.image} text-lg sm:text-2xl ${product.iconColor}"></i>
                        </div>
                        <div class="p-2 sm:p-4">
                            <h3 class="text-xs sm:text-base font-bold mb-1 sm:mb-2 line-clamp-2">${product.name}</h3>
                            <p class="theme-text-secondary text-xs mb-1 sm:mb-2">${product.category}</p>
                            <div class="flex items-center mb-2 sm:mb-3">
                                <div class="flex text-yellow-400">
                                    <i class="fas fa-star text-xs"></i>
                                    <i class="fas fa-star text-xs"></i>
                                    <i class="fas fa-star text-xs"></i>
                                    <i class="fas fa-star text-xs"></i>
                                    <i class="fas fa-star text-xs"></i>
                                </div>
                                <span class="mr-1 text-xs theme-text-secondary">(${toPersianNumber(product.rating)})</span>
                            </div>
                            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-1 sm:gap-0">
                                <span class="text-xs sm:text-sm font-bold text-purple-600">${toPersianNumber(product.price.toLocaleString())} تومان</span>
                                <button onclick="event.stopPropagation(); addToCart(${product.id})" class="bg-purple-600 hover:bg-purple-700 text-white px-2 sm:px-3 py-1 rounded-lg transition-colors w-full sm:w-auto">
                                    <i class="fas fa-cart-plus text-xs sm:text-sm"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                grid.innerHTML += productCard;
            });
        }
    }

    // Cart Functions
    function addToCart(productId) {
        const product = products.find(p => p.id === productId);
        if (!product) return;
        
        const existingItem = cart.find(item => item.id === productId);
        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cart.push({
                id: product.id,
                name: product.name,
                price: product.price,
                quantity: 1,
                image: product.image,
                color: product.color,
                iconColor: product.iconColor
            });
        }
        
        updateCartCount();
        renderCart();
        showNotification('محصول به سبد خرید اضافه شد!');
    }

    function removeFromCart(productId) {
        cart = cart.filter(item => item.id !== productId);
        updateCartCount();
        renderCart();
    }

    function updateQuantity(productId, newQuantity) {
        if (newQuantity <= 0) {
            removeFromCart(productId);
            return;
        }
        
        const item = cart.find(item => item.id === productId);
        if (item) {
            item.quantity = newQuantity;
            updateCartCount();
            renderCart();
        }
    }

    function updateCartCount() {
        const count = cart.reduce((total, item) => total + item.quantity, 0);
        document.getElementById('cart-count').textContent = count;
    }

    function renderCart() {
        const cartItems = document.getElementById('cart-items');
        if (!cartItems) return;
        
        if (cart.length === 0) {
            cartItems.innerHTML = `
                <div class="text-center py-8 sm:py-12">
                    <i class="fas fa-shopping-cart text-4xl sm:text-6xl text-gray-300 mb-3 sm:mb-4"></i>
                    <h3 class="text-lg sm:text-xl font-bold mb-2 text-gray-900 dark:text-white">سبد خرید شما خالی است</h3>
                    <p class="text-gray-600 dark:text-gray-400 mb-4 sm:mb-6 text-sm sm:text-base">برای خرید محصولات به صفحه محصولات بروید</p>
                    <button onclick="showPage('products')" class="bg-purple-600 hover:bg-purple-700 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl font-semibold transition-colors text-sm sm:text-base">
                        مشاهده محصولات
                    </button>
                </div>
            `;
        } else {
            cartItems.innerHTML = cart.map(item => `
                <div class="flex items-center gap-2 sm:gap-4 p-3 sm:p-4 border border-gray-200 dark:border-gray-700 rounded-lg sm:rounded-xl bg-white dark:bg-gray-800 shadow-sm">
                    <div class="w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br ${item.color} rounded-lg sm:rounded-xl flex items-center justify-center flex-shrink-0">
                        <i class="${item.image} text-lg sm:text-xl ${item.iconColor}"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h4 class="font-bold text-sm sm:text-base line-clamp-1 text-gray-900 dark:text-white">${item.name}</h4>
                        <p class="text-purple-600 font-semibold text-xs sm:text-sm">${item.price.toLocaleString()} تومان</p>
                    </div>
                    <div class="flex items-center gap-1 sm:gap-3">
                        <button onclick="updateQuantity(${item.id}, ${item.quantity - 1})" class="w-6 h-6 sm:w-8 sm:h-8 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 rounded-full flex items-center justify-center transition-colors">
                            <i class="fas fa-minus text-xs text-gray-700 dark:text-gray-300"></i>
                        </button>
                        <span class="w-6 sm:w-8 text-center font-semibold text-sm sm:text-base text-gray-900 dark:text-white">${item.quantity}</span>
                        <button onclick="updateQuantity(${item.id}, ${item.quantity + 1})" class="w-6 h-6 sm:w-8 sm:h-8 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 rounded-full flex items-center justify-center transition-colors">
                            <i class="fas fa-plus text-xs text-gray-700 dark:text-gray-300"></i>
                        </button>
                    </div>
                    <button onclick="removeFromCart(${item.id})" class="text-red-600 hover:text-red-700 p-1 sm:p-2 transition-colors">
                        <i class="fas fa-trash text-sm"></i>
                    </button>
                </div>
            `).join('');
        }
        
        updateCartSummary();
    }

    function updateCartSummary() {
        const subtotal = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        const shipping = subtotal > 500000 ? 0 : 25000;
        const discount = 10000;
        const total = subtotal + shipping - discount;
        
        const subtotalEl = document.getElementById('subtotal');
        const shippingEl = document.getElementById('shipping');
        const totalEl = document.getElementById('total');
        
        if (subtotalEl) subtotalEl.textContent = subtotal.toLocaleString() + ' تومان';
        if (shippingEl) shippingEl.textContent = shipping === 0 ? 'رایگان' : shipping.toLocaleString() + ' تومان';
        if (totalEl) totalEl.textContent = total.toLocaleString() + ' تومان';
    }

    function checkout() {
        if (cart.length === 0) {
            showNotification('سبد خرید شما خالی است!');
            return;
        }
        showNotification('در حال انتقال به درگاه پرداخت...');
    }

    // Notification Function
    function showNotification(message, type = 'success') {
        const container = document.getElementById('notification-container');
        const notification = document.createElement('div');
        
        const colors = {
            success: 'bg-green-500',
            error: 'bg-red-500',
            warning: 'bg-yellow-500',
            info: 'bg-blue-500'
        };
        
        const icons = {
            success: 'fas fa-check-circle',
            error: 'fas fa-times-circle',
            warning: 'fas fa-exclamation-triangle',
            info: 'fas fa-info-circle'
        };
        
        notification.className = `${colors[type]} text-white p-4 rounded-xl shadow-lg transition-all duration-300 transform translate-x-full max-w-sm`;
        notification.innerHTML = `
            <div class="flex items-center gap-3">
                <i class="${icons[type]}"></i>
                <span class="flex-1">${message}</span>
                <button onclick="this.parentElement.parentElement.remove()" class="text-white hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
        
        container.appendChild(notification);
        
        setTimeout(() => {
            notification.classList.remove('translate-x-full');
        }, 100);
        
        setTimeout(() => {
            notification.classList.add('translate-x-full');
            setTimeout(() => {
                if (container.contains(notification)) {
                    container.removeChild(notification);
                }
            }, 300);
        }, 5000);
    }

    // Filter Functions
    function applyFilters() {
        activeFilters.search = document.getElementById('search-input').value.toLowerCase();
        activeFilters.category = document.getElementById('category-filter').value;
        activeFilters.sort = document.getElementById('sort-filter').value;
        activeFilters.minPrice = parseInt(document.getElementById('min-price').value) || null;
        activeFilters.maxPrice = parseInt(document.getElementById('max-price').value) || null;
        
        filterProducts();
    }

    function quickFilter(filterType) {
        // Update active state for quick filter buttons
        document.querySelectorAll('.quick-filter-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        if (activeFilters.quickFilter === filterType) {
            activeFilters.quickFilter = null;
        } else {
            activeFilters.quickFilter = filterType;
            event.target.classList.add('active');
        }
        
        filterProducts();
    }

    function clearFilters() {
        activeFilters = {
            search: '',
            category: '',
            sort: 'default',
            minPrice: null,
            maxPrice: null,
            quickFilter: null
        };
        
        document.getElementById('search-input').value = '';
        document.getElementById('sort-filter').value = 'default';
        document.getElementById('min-price').value = '';
        document.getElementById('max-price').value = '';
        
        // Reset category pills
        document.querySelectorAll('.category-pill').forEach(pill => {
            pill.classList.remove('active');
        });
        document.querySelector('.category-pill').classList.add('active'); // First one (همه)
        
        // Reset quick filter buttons
        document.querySelectorAll('.quick-filter-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        filterProducts();
    }

    function filterProducts() {
        filteredProducts = products.filter(product => {
            // Search filter
            if (activeFilters.search && !product.name.toLowerCase().includes(activeFilters.search)) {
                return false;
            }
            
            // Category filter
            if (activeFilters.category && product.category !== activeFilters.category) {
                return false;
            }
            
            // Price range filter
            if (activeFilters.minPrice && product.price < activeFilters.minPrice) {
                return false;
            }
            if (activeFilters.maxPrice && product.price > activeFilters.maxPrice) {
                return false;
            }
            
            // Quick filter
            if (activeFilters.quickFilter && !product.tags.includes(activeFilters.quickFilter)) {
                return false;
            }
            
            return true;
        });
        
        // Sort products
        if (activeFilters.sort === 'price-low') {
            filteredProducts.sort((a, b) => a.price - b.price);
        } else if (activeFilters.sort === 'price-high') {
            filteredProducts.sort((a, b) => b.price - a.price);
        } else if (activeFilters.sort === 'rating') {
            filteredProducts.sort((a, b) => b.rating - a.rating);
        } else if (activeFilters.sort === 'name') {
            filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
        }
        
        renderProducts(filteredProducts);
        updateResultsInfo();
        updateActiveFilters();
    }

    function updateResultsInfo() {
        const resultsCount = document.getElementById('results-count');
        const noResults = document.getElementById('no-results');
        const productsGrid = document.getElementById('products-grid');
        
        if (filteredProducts.length === 0) {
            resultsCount.textContent = 'هیچ محصولی یافت نشد';
            noResults.classList.remove('hidden');
            productsGrid.classList.add('hidden');
        } else {
            resultsCount.textContent = `نمایش ${toPersianNumber(filteredProducts.length)} محصول از ${toPersianNumber(products.length)}`;
            noResults.classList.add('hidden');
            productsGrid.classList.remove('hidden');
        }
    }

    function updateActiveFilters() {
        const activeFiltersContainer = document.getElementById('active-filters');
        activeFiltersContainer.innerHTML = '';
        
        if (activeFilters.search) {
            addFilterTag(`جستجو: ${activeFilters.search}`, () => {
                activeFilters.search = '';
                document.getElementById('search-input').value = '';
                filterProducts();
            });
        }
        
        if (activeFilters.category) {
            addFilterTag(`دسته: ${activeFilters.category}`, () => {
                activeFilters.category = '';
                document.getElementById('category-filter').value = '';
                filterProducts();
            });
        }
        
        if (activeFilters.minPrice || activeFilters.maxPrice) {
            const priceText = `قیمت: ${activeFilters.minPrice ? toPersianNumber(activeFilters.minPrice.toLocaleString()) : '۰'} - ${activeFilters.maxPrice ? toPersianNumber(activeFilters.maxPrice.toLocaleString()) : '∞'}`;
            addFilterTag(priceText, () => {
                activeFilters.minPrice = null;
                activeFilters.maxPrice = null;
                document.getElementById('min-price').value = '';
                document.getElementById('max-price').value = '';
                filterProducts();
            });
        }
        
        if (activeFilters.quickFilter) {
            const filterNames = {
                bestseller: 'پرفروش',
                discount: 'تخفیف‌دار',
                new: 'جدید',
                luxury: 'لوکس'
            };
            addFilterTag(filterNames[activeFilters.quickFilter], () => {
                activeFilters.quickFilter = null;
                filterProducts();
            });
        }
    }

    function addFilterTag(text, onRemove) {
        const activeFiltersContainer = document.getElementById('active-filters');
        const tag = document.createElement('span');
        tag.className = 'bg-purple-100 text-purple-600 px-3 py-1 rounded-lg text-sm flex items-center gap-2';
        tag.innerHTML = `
            ${text}
            <button onclick="this.parentElement.remove(); (${onRemove.toString()})();" class="hover:text-purple-800">
                <i class="fas fa-times text-xs"></i>
            </button>
        `;
        activeFiltersContainer.appendChild(tag);
    }

    function toggleView(view) {
        currentView = view;
        const gridBtn = document.getElementById('grid-view');
        const listBtn = document.getElementById('list-view');
        
        if (view === 'grid') {
            gridBtn.className = 'p-2 bg-purple-600 text-white rounded-lg';
            listBtn.className = 'p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 transition-colors';
        } else {
            listBtn.className = 'p-2 bg-purple-600 text-white rounded-lg';
            gridBtn.className = 'p-2 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 transition-colors';
        }
        
        renderProducts(filteredProducts);
    }

    function toPersianNumber(num) {
        const persianDigits = '۰۱۲۳۴۵۶۷۸۹';
        return num.toString().replace(/\d/g, (digit) => persianDigits[digit]);
    }

    // Hearts Background
    function createHeart() {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.innerHTML = '💖';
        
        // Random size
        const size = Math.random() * 30 + 20; // 20px to 50px
        heart.style.fontSize = size + 'px';
        
        // Random position
        heart.style.left = Math.random() * 100 + '%';
        heart.style.top = Math.random() * 100 + '%';
        
        return heart;
    }
    
    function createLantern() {
        const lantern = document.createElement('div');
        lantern.className = 'lantern';
        
        lantern.innerHTML = `
            <div class="lantern-body">
                <div class="lantern-handle"></div>
                <div class="lantern-top"></div>
                <div class="lantern-flame"></div>
                <div class="lantern-light"></div>
            </div>
        `;
        
        // Random position
        lantern.style.left = Math.random() * 100 + '%';
        
        // Random animation delay
        lantern.style.animationDelay = Math.random() * 12 + 's';
        
        return lantern;
    }
    
    function createStar() {
        const star = document.createElement('div');
        star.className = 'star';
        star.innerHTML = '✨';
        
        // Random size
        const size = Math.random() * 15 + 10; // 10px to 25px
        star.style.fontSize = size + 'px';
        
        // Random position
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        
        // Random animation delay
        star.style.animationDelay = Math.random() * 3 + 's';
        
        return star;
    }
    
    function initHeartsBackground() {
        const heartsContainer = document.getElementById('hearts-bg');
        const heartCount = 25; // Number of hearts
        const starCount = 15; // Number of stars
        
        // Create hearts
        for (let i = 0; i < heartCount; i++) {
            const heart = createHeart();
            heartsContainer.appendChild(heart);
        }
        
        // Create stars for dark mode
        for (let i = 0; i < starCount; i++) {
            const star = createStar();
            heartsContainer.appendChild(star);
        }
        
        // Create lanterns for dark mode
        for (let i = 0; i < 4; i++) {
            const lantern = createLantern();
            heartsContainer.appendChild(lantern);
        }
    }
    
    // Continuously create new lanterns in dark mode
    function startLanternAnimation() {
        setInterval(() => {
            if (document.body.classList.contains('dark')) {
                const heartsContainer = document.getElementById('hearts-bg');
                const lantern = createLantern();
                heartsContainer.appendChild(lantern);
                
                // Remove lantern after animation completes
                setTimeout(() => {
                    if (heartsContainer.contains(lantern)) {
                        heartsContainer.removeChild(lantern);
                    }
                }, 15000);
            }
        }, 4000); // Create new lantern every 4 seconds
    }

    // Product Modal Functions
    function openProductModal(productId) {
        const product = products.find(p => p.id === productId);
        if (!product) return;
        
        const modalContent = document.getElementById('modal-product-content');
        modalContent.innerHTML = `
            <div class="grid lg:grid-cols-2 gap-4 lg:gap-8">
                <!-- Product Image -->
                <div class="space-y-3 lg:space-y-4">
                    <div id="main-product-image" class="w-full h-48 sm:h-64 lg:h-80 bg-gradient-to-br ${product.color} rounded-2xl flex items-center justify-center shadow-lg transition-all duration-300">
                        <i id="main-product-icon" class="${product.image} text-4xl sm:text-5xl lg:text-6xl ${product.iconColor}"></i>
                    </div>
                    
                    <!-- Product Gallery Thumbnails -->
                    <div class="flex gap-2 justify-center lg:justify-start">
                        <div onclick="changeMainImage('${product.color}', '${product.image}', '${product.iconColor}')" class="w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br ${product.color} rounded-lg flex items-center justify-center border-2 border-purple-500 cursor-pointer">
                            <i class="${product.image} text-sm sm:text-lg ${product.iconColor}"></i>
                        </div>
                        ${product.detailImages.map((img, index) => `
                            <div onclick="changeMainImage('${img.color}', '${img.icon}', '${img.iconColor}')" class="w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br ${img.color} rounded-lg flex items-center justify-center cursor-pointer opacity-60 hover:opacity-100 transition-all duration-300 border-2 border-transparent hover:border-purple-300">
                                <i class="${img.icon} text-sm sm:text-lg ${img.iconColor}"></i>
                            </div>
                        `).join('')}
                    </div>
                </div>
                
                <!-- Product Info -->
                <div class="space-y-4 lg:space-y-6">
                    <div>
                        <h1 class="text-lg sm:text-xl lg:text-2xl font-bold mb-2 lg:mb-3 text-gray-900 dark:text-white">${product.name}</h1>
                        <p class="text-sm lg:text-base text-gray-900 dark:text-gray-400 mb-3 lg:mb-4">دسته‌بندی: ${product.category}</p>
                        
                        <!-- Rating -->
                        <div class="flex items-center gap-2 lg:gap-3 mb-3 lg:mb-4">
                            <div class="flex text-yellow-400">
                                <i class="fas fa-star text-sm"></i>
                                <i class="fas fa-star text-sm"></i>
                                <i class="fas fa-star text-sm"></i>
                                <i class="fas fa-star text-sm"></i>
                                <i class="fas fa-star text-sm"></i>
                            </div>
                            <span class="font-semibold text-sm lg:text-base text-gray-900 dark:text-white">${product.rating}</span>
                            <span class="text-gray-900 dark:text-gray-400 text-sm">(۱۲۳ نظر)</span>
                        </div>
                        
                        <!-- Price -->
                        <div class="flex flex-wrap items-center gap-2 lg:gap-3 mb-4 lg:mb-6">
                            <span class="text-lg lg:text-xl font-bold text-purple-600">${product.price.toLocaleString()} تومان</span>
                            <span class="text-gray-900 dark:text-gray-400 line-through text-sm">${(product.price * 1.2).toLocaleString()} تومان</span>
                            <span class="bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 px-2 py-1 rounded-lg text-xs font-bold">۲۰٪ تخفیف</span>
                        </div>
                    </div>
                    
                    <!-- Product Options -->
                    <div class="space-y-3 lg:space-y-4">
                        <div>
                            <h3 class="font-bold mb-2 text-sm lg:text-base text-gray-900 dark:text-white">رنگ:</h3>
                            <div class="flex gap-2">
                                <button class="w-8 h-8 lg:w-10 lg:h-10 bg-red-500 rounded-full border-2 border-purple-500 shadow-lg"></button>
                                <button class="w-8 h-8 lg:w-10 lg:h-10 bg-pink-500 rounded-full border-2 border-transparent hover:border-purple-500 shadow-lg transition-colors"></button>
                                <button class="w-8 h-8 lg:w-10 lg:h-10 bg-purple-500 rounded-full border-2 border-transparent hover:border-purple-500 shadow-lg transition-colors"></button>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="font-bold mb-2 text-sm lg:text-base text-gray-900 dark:text-white">تعداد:</h3>
                            <div class="flex items-center gap-3">
                                <button onclick="updateModalQuantity(-1)" class="w-8 h-8 lg:w-10 lg:h-10 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 rounded-lg flex items-center justify-center font-bold transition-colors text-sm lg:text-base text-gray-900 dark:text-gray-300">-</button>
                                <span id="modal-quantity" class="text-base lg:text-lg font-bold w-6 lg:w-8 text-center text-gray-900 dark:text-white">1</span>
                                <button onclick="updateModalQuantity(1)" class="w-8 h-8 lg:w-10 lg:h-10 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 rounded-lg flex items-center justify-center font-bold transition-colors text-sm lg:text-base text-gray-900 dark:text-gray-300">+</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="space-y-2">
                        <button onclick="addToCartFromModal(${product.id})" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-2.5 lg:py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 text-sm lg:text-base">
                            <i class="fas fa-cart-plus"></i>
                            افزودن به سبد خرید
                        </button>
                        <button class="w-full bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 py-2.5 lg:py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2 text-sm lg:text-base text-gray-900 dark:text-gray-300">
                            <i class="fas fa-heart"></i>
                            افزودن به علاقه‌مندی‌ها
                        </button>
                    </div>
                    
                    <!-- Product Description -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg p-3 lg:p-4 border border-gray-200 dark:border-gray-700">
                        <h3 class="font-semibold mb-2 text-sm lg:text-base text-gray-900 dark:text-white">توضیحات محصول</h3>
                        <p class="text-xs lg:text-sm text-gray-900 dark:text-gray-300 leading-relaxed mb-3">
                            این محصول با کیفیت بالا و مواد اولیه درجه یک تولید شده است. مناسب برای استفاده روزانه و دارای ماندگاری بالا می‌باشد.
                        </p>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-1 lg:gap-2 text-xs lg:text-sm">
                            <div class="flex items-center gap-1 lg:gap-2">
                                <i class="fas fa-check-circle text-green-500 text-xs"></i>
                                <span class="text-gray-900 dark:text-white font-medium">کیفیت تضمینی</span>
                            </div>
                            <div class="flex items-center gap-1 lg:gap-2">
                                <i class="fas fa-check-circle text-green-500 text-xs"></i>
                                <span class="text-gray-900 dark:text-white font-medium">ارسال سریع</span>
                            </div>
                            <div class="flex items-center gap-1 lg:gap-2">
                                <i class="fas fa-check-circle text-green-500 text-xs"></i>
                                <span class="text-gray-900 dark:text-white font-medium">ضمانت بازگشت</span>
                            </div>
                            <div class="flex items-center gap-1 lg:gap-2">
                                <i class="fas fa-check-circle text-green-500 text-xs"></i>
                                <span class="text-gray-900 dark:text-white font-medium">پشتیبانی ۲۴/۷</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        document.getElementById('product-modal').classList.add('active');
    }

    function closeProductModal() {
        document.getElementById('product-modal').classList.remove('active');
    }

    let modalQuantity = 1;

    function updateModalQuantity(change) {
        modalQuantity = Math.max(1, modalQuantity + change);
        document.getElementById('modal-quantity').textContent = modalQuantity;
    }

    function addToCartFromModal(productId) {
        const product = products.find(p => p.id === productId);
        if (!product) return;
        
        const existingItem = cart.find(item => item.id === productId);
        if (existingItem) {
            existingItem.quantity += modalQuantity;
        } else {
            cart.push({
                id: product.id,
                name: product.name,
                price: product.price,
                quantity: modalQuantity,
                image: product.image,
                color: product.color,
                iconColor: product.iconColor
            });
        }
        
        updateCartCount();
        renderCart();
        closeProductModal();
        showNotification(`${modalQuantity} عدد ${product.name} به سبد خرید اضافه شد!`);
        modalQuantity = 1; // Reset quantity
    }

    // Change main product image in modal
    function changeMainImage(color, icon, iconColor) {
        const mainImage = document.getElementById('main-product-image');
        const mainIcon = document.getElementById('main-product-icon');
        
        if (mainImage && mainIcon) {
            mainImage.className = `w-full h-80 bg-gradient-to-br ${color} rounded-2xl flex items-center justify-center shadow-lg transition-all duration-300`;
            mainIcon.className = `${icon} text-6xl ${iconColor}`;
            
            // Update thumbnail borders
            document.querySelectorAll('.flex.gap-2 > div').forEach(thumb => {
                thumb.classList.remove('border-purple-500');
                thumb.classList.add('border-transparent');
            });
            
            // Add border to clicked thumbnail
            event.target.closest('div').classList.remove('border-transparent');
            event.target.closest('div').classList.add('border-purple-500');
        }
    }

    // Blog Modal Functions
    function openBlogModal(blogId) {
        const blog = blogs.find(b => b.id === blogId);
        if (!blog) return;
        
        const modalContent = document.getElementById('modal-product-content');
        modalContent.innerHTML = `
            <div class="max-w-4xl mx-auto">
                <!-- Blog Header -->
                <div class="h-32 sm:h-40 lg:h-48 bg-gradient-to-br ${blog.color} rounded-2xl flex items-center justify-center mb-4 lg:mb-6">
                    <i class="${blog.image} text-4xl sm:text-5xl lg:text-6xl ${blog.iconColor}"></i>
                </div>
                
                <!-- Blog Content -->
                <div class="space-y-4 lg:space-y-6 text-sm lg:text-base">
                    ${blog.content}
                    
                    <!-- Share Buttons -->
                    <div class="pt-4 lg:pt-6 border-t theme-border">
                        <h4 class="font-bold mb-3 lg:mb-4 text-sm lg:text-base">اشتراک‌گذاری:</h4>
                        <div class="flex flex-wrap gap-2 lg:gap-3">
                            <button class="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-3 lg:px-4 py-2 rounded-lg transition-colors text-xs lg:text-sm">
                                <i class="fab fa-telegram"></i>
                                تلگرام
                            </button>
                            <button class="flex items-center gap-2 bg-pink-600 hover:bg-pink-700 text-white px-3 lg:px-4 py-2 rounded-lg transition-colors text-xs lg:text-sm">
                                <i class="fab fa-instagram"></i>
                                اینستاگرام
                            </button>
                            <button class="flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-3 lg:px-4 py-2 rounded-lg transition-colors text-xs lg:text-sm">
                                <i class="fab fa-whatsapp"></i>
                                واتساپ
                            </button>
                        </div>
                    </div>
                    
                    <!-- Related Posts -->
                    <div class="pt-4 lg:pt-6 border-t theme-border">
                        <h4 class="font-bold mb-3 lg:mb-4 text-sm lg:text-base">مطالب مرتبط:</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3 lg:gap-4">
                            ${blogs.filter(b => b.id !== blogId).slice(0, 2).map(relatedBlog => `
                                <div onclick="openBlogModal(${relatedBlog.id})" class="flex gap-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors">
                                    <div class="w-10 h-10 lg:w-12 lg:h-12 bg-gradient-to-br ${relatedBlog.color} rounded-xl flex items-center justify-center flex-shrink-0">
                                        <i class="${relatedBlog.image} text-sm lg:text-lg ${relatedBlog.iconColor}"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-bold text-xs lg:text-sm mb-1 line-clamp-2">${relatedBlog.title}</h5>
                                        <p class="text-xs theme-text-secondary">${relatedBlog.date}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        document.getElementById('product-modal').classList.add('active');
    }

    // Compact Filter Functions
    let isCompactOpen = false;
    
    function toggleCompact() {
        const filterPanel = document.getElementById('filter-panel');
        
        if (!isCompactOpen) {
            // Open compact
            filterPanel.style.transform = 'translateX(0)';
            isCompactOpen = true;
        } else {
            // Close compact
            filterPanel.style.transform = 'translateX(100%)';
            isCompactOpen = false;
        }
    }
    
    function setCategoryFilter(category) {
        // Update active state
        document.querySelectorAll('.category-pill').forEach(pill => {
            pill.classList.remove('active');
        });
        event.target.classList.add('active');
        
        // Set filter
        activeFilters.category = category;
        filterProducts();
    }
    
    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        // Start countdown timer - شروع تایمر تخفیف
        startCountdown();
        
        // Initialize hearts background
        initHeartsBackground();
        
        // Start lantern animation
        startLanternAnimation();
        
        // Load theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark');
            document.getElementById('theme-icon').className = 'fas fa-sun text-lg';
        }
        
        // Render products and blogs
        renderProducts();
        renderBlogs();
        
        // Initialize cart
        updateCartCount();
        renderCart();
        
        // Add search event listener
        const searchInput = document.getElementById('search-input');
        if (searchInput) {
            searchInput.addEventListener('input', function() {
                clearTimeout(this.searchTimeout);
                this.searchTimeout = setTimeout(() => {
                    applyFilters();
                }, 300);
            });
        }
        
        // Add filter event listeners
        const categoryFilter = document.getElementById('category-filter');
        const sortFilter = document.getElementById('sort-filter');
        
        if (categoryFilter) {
            categoryFilter.addEventListener('change', applyFilters);
        }
        
        if (sortFilter) {
            sortFilter.addEventListener('change', applyFilters);
        }
        
        // Initialize filters
        filterProducts();
    });
</script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'966cdfe7e6e91994',t:'MTc1Mzc5NDgxNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
